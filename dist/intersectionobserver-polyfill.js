(function(f,h){function t(a){this.time=a.time;this.target=a.target;this.rootBounds=a.rootBounds;this.boundingClientRect=a.boundingClientRect;this.intersectionRect=a.intersectionRect||q();this.isIntersecting=!!a.intersectionRect;a=this.boundingClientRect;a=a.width*a.height;var b=this.intersectionRect;b=b.width*b.height;this.intersectionRatio=a?Number((b/a).toFixed(4)):this.isIntersecting?1:0}function d(a,b){b=b||{};if("function"!=typeof a)throw Error("callback must be a function");if(b.root&&1!=b.root.nodeType)throw Error("root must be an Element");
this._checkForIntersections=y(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT);this._callback=a;this._observationTargets=[];this._queuedEntries=[];this._rootMarginValues=this._parseRootMargin(b.rootMargin);this.thresholds=this._initThresholds(b.threshold);this.root=b.root||null;this.rootMargin=this._rootMarginValues.map(function(c){return c.value+c.unit}).join(" ")}function y(a,b){var c=null;return function(){c||(c=setTimeout(function(){a();c=null},b))}}function u(a,b,c,e){"function"==
typeof a.addEventListener?a.addEventListener(b,c,e||!1):"function"==typeof a.attachEvent&&a.attachEvent("on"+b,c)}function v(a,b,c,e){"function"==typeof a.removeEventListener?a.removeEventListener(b,c,e||!1):"function"==typeof a.detatchEvent&&a.detatchEvent("on"+b,c)}function m(a){try{var b=a.getBoundingClientRect()}catch(c){}if(!b)return q();b.width&&b.height||(b={top:b.top,right:b.right,bottom:b.bottom,left:b.left,width:b.right-b.left,height:b.bottom-b.top});return b}function q(){return{top:0,bottom:0,
left:0,right:0,width:0,height:0}}function w(a,b){for(;b;){if(b==a)return!0;b=r(b)}return!1}function r(a){return(a=a.parentNode)&&11==a.nodeType&&a.host?a.host:a&&a.assignedSlot?a.assignedSlot.parentNode:a}if("IntersectionObserver"in f&&"IntersectionObserverEntry"in f&&"intersectionRatio"in f.IntersectionObserverEntry.prototype)"isIntersecting"in f.IntersectionObserverEntry.prototype||Object.defineProperty(f.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}});
else{var n=[];d.prototype.THROTTLE_TIMEOUT=100;d.prototype.POLL_INTERVAL=null;d.prototype.USE_MUTATION_OBSERVER=!0;d.prototype.observe=function(a){if(!this._observationTargets.some(function(b){return b.element==a})){if(!a||1!=a.nodeType)throw Error("target must be an Element");this._registerInstance();this._observationTargets.push({element:a,entry:null});this._monitorIntersections();this._checkForIntersections()}};d.prototype.unobserve=function(a){this._observationTargets=this._observationTargets.filter(function(b){return b.element!=
a});this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())};d.prototype.disconnect=function(){this._observationTargets=[];this._unmonitorIntersections();this._unregisterInstance()};d.prototype.takeRecords=function(){var a=this._queuedEntries.slice();this._queuedEntries=[];return a};d.prototype._initThresholds=function(a){a=a||[0];Array.isArray(a)||(a=[a]);return a.sort().filter(function(b,c,e){if("number"!=typeof b||isNaN(b)||0>b||1<b)throw Error("threshold must be a number between 0 and 1 inclusively");
return b!==e[c-1]})};d.prototype._parseRootMargin=function(a){a=(a||"0px").split(/\s+/).map(function(b){b=/^(-?\d*\.?\d+)(px|%)$/.exec(b);if(!b)throw Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(b[1]),unit:b[2]}});a[1]=a[1]||a[0];a[2]=a[2]||a[0];a[3]=a[3]||a[1];return a};d.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,
this.POLL_INTERVAL):(u(f,"resize",this._checkForIntersections,!0),u(h,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in f&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(h,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))};d.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,
v(f,"resize",this._checkForIntersections,!0),v(h,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))};d.prototype._checkForIntersections=function(){var a=this._rootIsInDom(),b=a?this._getRootRect():q();this._observationTargets.forEach(function(c){var e=c.element,g=m(e),k=this._rootContainsTarget(e),l=c.entry,p=a&&k&&this._computeTargetAndRootIntersection(e,b);c=c.entry=new t({time:f.performance&&performance.now&&performance.now(),target:e,
boundingClientRect:g,rootBounds:b,intersectionRect:p});l?a&&k?this._hasCrossedThreshold(l,c)&&this._queuedEntries.push(c):l&&l.isIntersecting&&this._queuedEntries.push(c):this._queuedEntries.push(c)},this);this._queuedEntries.length&&this._callback(this.takeRecords(),this)};d.prototype._computeTargetAndRootIntersection=function(a,b){if("none"!=f.getComputedStyle(a).display){var c=m(a);a=r(a);for(var e=!1;!e;){var g=null,k=1==a.nodeType?f.getComputedStyle(a):{};if("none"==k.display)return;a==this.root||
a==h?(e=!0,g=b):a!=h.body&&a!=h.documentElement&&"visible"!=k.overflow&&(g=m(a));if(g){k=Math.max(g.top,c.top);var l=Math.min(g.bottom,c.bottom),p=Math.max(g.left,c.left);c=Math.min(g.right,c.right);g=c-p;var x=l-k;c=0<=g&&0<=x&&{top:k,bottom:l,left:p,right:c,width:g,height:x};if(!c)break}a=r(a)}return c}};d.prototype._getRootRect=function(){if(this.root)var a=m(this.root);else{a=h.documentElement;var b=h.body;a={top:0,left:0,right:a.clientWidth||b.clientWidth,width:a.clientWidth||b.clientWidth,bottom:a.clientHeight||
b.clientHeight,height:a.clientHeight||b.clientHeight}}return this._expandRectByRootMargin(a)};d.prototype._expandRectByRootMargin=function(a){var b=this._rootMarginValues.map(function(c,e){return"px"==c.unit?c.value:c.value*(e%2?a.width:a.height)/100});b={top:a.top-b[0],right:a.right+b[1],bottom:a.bottom+b[2],left:a.left-b[3]};b.width=b.right-b.left;b.height=b.bottom-b.top;return b};d.prototype._hasCrossedThreshold=function(a,b){a=a&&a.isIntersecting?a.intersectionRatio||0:-1;b=b.isIntersecting?b.intersectionRatio||
0:-1;if(a!==b)for(var c=0;c<this.thresholds.length;c++){var e=this.thresholds[c];if(e==a||e==b||e<a!==e<b)return!0}};d.prototype._rootIsInDom=function(){return!this.root||w(h,this.root)};d.prototype._rootContainsTarget=function(a){return w(this.root||h,a)};d.prototype._registerInstance=function(){0>n.indexOf(this)&&n.push(this)};d.prototype._unregisterInstance=function(){var a=n.indexOf(this);-1!=a&&n.splice(a,1)};f.IntersectionObserver=d;f.IntersectionObserverEntry=t}})(window,document);
